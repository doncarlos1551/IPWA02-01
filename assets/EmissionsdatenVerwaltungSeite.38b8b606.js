import{u as J,b,Q as A,a as X}from"./QInput.39a1f7b7.js";import{P as _,aC as x,aD as ee,D as ne,H as ae,a1 as le,d as $,aE as M,r as p,Y as L,_ as z,o as w,j as y,w as i,a,m as j,q as C,e as se,Q as f,v as I,f as v,z as oe,i as U,c as te,F as ie,p as de,g as ue}from"./index.1c55f890.js";import{i as re,d as T,U as me,L as pe,Q as N,b as Ee,e as fe,c as ve,f as B,a as ge}from"./dataUtils.90bb968b.js";var q=_({name:"QCardActions",props:{...x,vertical:Boolean},setup(e,{slots:n}){const r=ee(e),d=ne(()=>`q-card__actions ${r.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>ae("div",{class:d.value},le(n.default))}});const De=$({name:"EmissionErstellenDialog",props:{modelValue:{type:Boolean,default:!1}},emits:{"update:modelValue":null,verstecken:null,create:e=>re(e)},setup(e,{emit:n}){const{modelValue:r}=M(e),{decodedJwt:d}=J(),m=p(r.value),u=p({id:-1,land:"",unternehmen:"",jahr:0,co2:0,validiert:!1});function o(){m.value=!1,n("verstecken")}const s=async()=>{u.value.co2=parseInt(""+u.value.co2),u.value.jahr=parseInt(""+u.value.jahr),n("create",u.value)};return L(r,E=>{m.value=E}),L(m,E=>{n("update:modelValue",E)}),{decodedJwt:d,zeigeDialog:m,emissionsDaten:u,verstecken:o,senden:s}}}),Ve=v("div",{class:"text-h6"},"Neue Emissionsdaten",-1);function be(e,n,r,d,m,u){return w(),y(I,{modelValue:e.zeigeDialog,"onUpdate:modelValue":n[6]||(n[6]=o=>e.zeigeDialog=o)},{default:i(()=>[a(j,null,{default:i(()=>[a(C,null,{default:i(()=>[Ve]),_:1}),a(C,null,{default:i(()=>{var o;return[a(b,{modelValue:e.emissionsDaten.land,"onUpdate:modelValue":n[0]||(n[0]=s=>e.emissionsDaten.land=s),label:"Land"},null,8,["modelValue"]),a(b,{modelValue:e.emissionsDaten.unternehmen,"onUpdate:modelValue":n[1]||(n[1]=s=>e.emissionsDaten.unternehmen=s),label:"Unternehmen"},null,8,["modelValue"]),a(b,{modelValue:e.emissionsDaten.jahr,"onUpdate:modelValue":n[2]||(n[2]=s=>e.emissionsDaten.jahr=s),label:"Jahr",type:"number"},null,8,["modelValue"]),a(b,{modelValue:e.emissionsDaten.co2,"onUpdate:modelValue":n[3]||(n[3]=s=>e.emissionsDaten.co2=s),label:"CO2 Emissionen",type:"number"},null,8,["modelValue"]),e.decodedJwt&&((o=e.decodedJwt.groups)==null?void 0:o.includes("Admin"))?(w(),y(T,{key:0,modelValue:e.emissionsDaten.validiert,"onUpdate:modelValue":n[4]||(n[4]=s=>e.emissionsDaten.validiert=s),label:"Validiert"},null,8,["modelValue"])):se("",!0)]}),_:1}),a(q,{align:"right"},{default:i(()=>[a(f,{flat:"",label:"Abbrechen",color:"negative",onClick:n[5]||(n[5]=o=>e.verstecken())}),a(f,{flat:"",label:"Senden",color:"positive",onClick:e.senden},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var ce=z(De,[["render",be]]);const Ue=$({name:"LandErstellenDialog",props:{modelValue:{type:Boolean,default:!1}},emits:{"update:modelValue":null,verstecken:null,create:e=>typeof e=="string"},setup(e,{emit:n}){const{modelValue:r}=M(e),d=p(r.value),m=p("");function u(){d.value=!1,n("verstecken")}const o=async()=>{n("create",m.value)};return L(r,s=>{d.value=s}),L(d,s=>{n("update:modelValue",s)}),{zeigeDialog:d,neuesLandName:m,verstecken:u,senden:o}}}),Le=v("div",{class:"text-h6"},"Neues Land",-1);function we(e,n,r,d,m,u){return w(),y(I,{modelValue:e.zeigeDialog,"onUpdate:modelValue":n[2]||(n[2]=o=>e.zeigeDialog=o)},{default:i(()=>[a(j,null,{default:i(()=>[a(C,null,{default:i(()=>[Le]),_:1}),a(C,null,{default:i(()=>[a(b,{modelValue:e.neuesLandName,"onUpdate:modelValue":n[0]||(n[0]=o=>e.neuesLandName=o),label:"Land"},null,8,["modelValue"])]),_:1}),a(q,{align:"right"},{default:i(()=>[a(f,{flat:"",label:"Abbrechen",color:"negative",onClick:n[1]||(n[1]=o=>e.verstecken())}),a(f,{flat:"",label:"Senden",color:"positive",onClick:e.senden},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var Ce=z(Ue,[["render",we]]);const he=$({name:"EmissionsdatenVerwaltungSeite",components:{UnternehmenCo2Tabelle:me,LandCo2Tabelle:pe,EmissionErstellenDialog:ce,LandErstellenDialog:Ce},setup(){const{decodedJwt:e,alleLaender:n,neuesLand:r,landLoeschen:d,landAktualisieren:m,alleEmissionsDaten:u,neueEmissionsDaten:o,emissionsDatenLoeschen:s,emissionsDatenAktualisieren:E,emissionsDatenValidieren:h}=J(),t=p(!1),g=p(!1),R=p(!1),F=p(!1),P=p("unternehmen"),S=p([]),D=p([]);async function Z(l){await r({name:l}),await c(),g.value=!1}async function H(l){await d(l),await c()}async function O(l){await m(l.id,fe(l)),await c()}const c=async()=>{const l=await n();l&&(D.value=l.map(k=>ve(k)))};async function Y(l){await o(B(l,D.value)),await V(),t.value=!1}async function G(l){await s(l),await V()}async function K(l){await E(l.id,B(l,D.value)),await V()}async function W(l){await h(l),await V()}const V=async()=>{const l=await u();l&&(S.value=l.map(k=>ge(k,D.value)))};return oe(async()=>{await c(),await V()}),{decodedJwt:e,zeigeEmissionErstellenDialog:t,zeigeLandErstellenDialog:g,editEmissionTabelle:R,editLandTabelle:F,tabellenTab:P,unternehmenEmissionsDaten:S,landEmissionsDaten:D,onCreateLandEmission:Z,onDeleteLandEmission:H,onUpdateLandEmission:O,onCreateUnternehmenEmission:Y,onDeleteUnternehmenEmission:G,onUpdateUnternehmenEmission:K,onValidateUnternehmenEmission:W}}}),Q=e=>(de("data-v-e7074632"),e=e(),ue(),e),ke={class:"emissionen-verwaltung-seite"},ye=Q(()=>v("h3",null,"Emissionen",-1)),Te=Q(()=>v("p",null," Hier finden Sie informationen \xFCber Emissionen. Der unten aufgelisteten Tabelle entnehmen Sie die CO2-Aussto\xDFwerte ausgew\xE4hlter Unternehmen in 1000kg/Jahr. ",-1)),$e=Q(()=>v("hr",null,null,-1));function ze(e,n,r,d,m,u){const o=U("UnternehmenCo2Tabelle"),s=U("LandCo2Tabelle"),E=U("EmissionErstellenDialog"),h=U("LandErstellenDialog");return w(),te(ie,null,[v("div",ke,[ye,Te,$e,a(X,{modelValue:e.tabellenTab,"onUpdate:modelValue":n[0]||(n[0]=t=>e.tabellenTab=t),class:"bg-primary text-dark shadow-2",align:"justify"},{default:i(()=>[a(A,{name:"unternehmen",label:"Unternehmen"}),a(A,{name:"land",label:"Land"})]),_:1},8,["modelValue"]),a(Ee,{modelValue:e.tabellenTab,"onUpdate:modelValue":n[5]||(n[5]=t=>e.tabellenTab=t),style:{"background-color":"transparent"}},{default:i(()=>[a(N,{name:"unternehmen"},{default:i(()=>{var t;return[a(f,{label:"Neuer Datensatz",color:"primary",onClick:n[1]||(n[1]=g=>e.zeigeEmissionErstellenDialog=!0)}),a(T,{modelValue:e.editEmissionTabelle,"onUpdate:modelValue":n[2]||(n[2]=g=>e.editEmissionTabelle=g),label:"Editieren"},null,8,["modelValue"]),a(o,{"emissions-daten":e.unternehmenEmissionsDaten,adminMode:e.decodedJwt&&((t=e.decodedJwt.groups)==null?void 0:t.includes("Admin")),validateMode:!0,editMode:e.editEmissionTabelle,onDelete:e.onDeleteUnternehmenEmission,onUpdate:e.onUpdateUnternehmenEmission,onValidate:e.onValidateUnternehmenEmission},null,8,["emissions-daten","adminMode","editMode","onDelete","onUpdate","onValidate"])]}),_:1}),a(N,{name:"land"},{default:i(()=>[a(f,{label:"Neues Land",color:"primary",onClick:n[3]||(n[3]=t=>e.zeigeLandErstellenDialog=!0)}),a(T,{modelValue:e.editEmissionTabelle,"onUpdate:modelValue":n[4]||(n[4]=t=>e.editEmissionTabelle=t),label:"Editieren"},null,8,["modelValue"]),a(s,{"emissions-daten":e.landEmissionsDaten,editMode:e.editLandTabelle,onDelete:e.onDeleteLandEmission,onUpdate:e.onUpdateLandEmission},null,8,["emissions-daten","editMode","onDelete","onUpdate"])]),_:1})]),_:1},8,["modelValue"])]),a(E,{modelValue:e.zeigeEmissionErstellenDialog,"onUpdate:modelValue":n[6]||(n[6]=t=>e.zeigeEmissionErstellenDialog=t),onCreate:e.onCreateUnternehmenEmission},null,8,["modelValue","onCreate"]),a(h,{modelValue:e.zeigeLandErstellenDialog,"onUpdate:modelValue":n[7]||(n[7]=t=>e.zeigeLandErstellenDialog=t),onCreate:e.onCreateLandEmission},null,8,["modelValue","onCreate"])],64)}var Ne=z(he,[["render",ze],["__scopeId","data-v-e7074632"]]);export{Ne as default};
